const f={context:void 0,registry:void 0,effects:void 0,done:!1,getContextId(){return j(this.context.count)},getNextContextId(){return j(this.context.count++)}};function j(t){const e=String(t),n=e.length-1;return f.context.id+(n?String.fromCharCode(96+n):"")+e}function $(t){f.context=t}const K=(t,e)=>t===e,E=Symbol("solid-proxy"),X=typeof Proxy=="function",W=Symbol("solid-track"),x={equals:K};let U=R;const p=1,v=2,k={owned:null,cleanups:null,context:null,owner:null};var i=null;let C=null,Y=null,o=null,c=null,h=null,O=0;function _(t,e){const n=o,s=i,u=t.length===0,r=e===void 0?s:e,l=u?k:{owned:null,cleanups:null,context:r?r.context:null,owner:r},a=u?t:()=>t(()=>P(()=>b(l)));i=l,o=null;try{return g(a,!0)}finally{o=n,i=s}}function z(t,e){e=e?Object.assign({},x,e):x;const n={value:t,observers:null,observerSlots:null,comparator:e.equals||void 0},s=u=>(typeof u=="function"&&(u=u(n.value)),I(n,u));return[D.bind(n),s]}function B(t,e,n){const s=A(t,e,!1,p);w(s)}function J(t,e,n){U=M;const s=A(t,e,!1,p);s.user=!0,h?h.push(s):w(s)}function Z(t,e,n){n=n?Object.assign({},x,n):x;const s=A(t,e,!0,0);return s.observers=null,s.observerSlots=null,s.comparator=n.equals||void 0,w(s),D.bind(s)}function q(t){return g(t,!1)}function P(t){if(o===null)return t();const e=o;o=null;try{return t()}finally{o=e}}function tt(){return o}function D(){if(this.sources&&this.state)if(this.state===p)w(this);else{const t=c;c=null,g(()=>m(this),!1),c=t}if(o){const t=this.observers?this.observers.length:0;o.sources?(o.sources.push(this),o.sourceSlots.push(t)):(o.sources=[this],o.sourceSlots=[t]),this.observers?(this.observers.push(o),this.observerSlots.push(o.sources.length-1)):(this.observers=[o],this.observerSlots=[o.sources.length-1])}return this.value}function I(t,e,n){let s=t.value;return(!t.comparator||!t.comparator(s,e))&&(t.value=e,t.observers&&t.observers.length&&g(()=>{for(let u=0;u<t.observers.length;u+=1){const r=t.observers[u],l=C&&C.running;l&&C.disposed.has(r),(l?!r.tState:!r.state)&&(r.pure?c.push(r):h.push(r),r.observers&&T(r)),l||(r.state=p)}if(c.length>1e6)throw c=[],new Error},!1)),e}function w(t){if(!t.fn)return;b(t);const e=O;G(t,t.value,e)}function G(t,e,n){let s;const u=i,r=o;o=i=t;try{s=t.fn(e)}catch(l){return t.pure&&(t.state=p,t.owned&&t.owned.forEach(b),t.owned=null),t.updatedAt=n+1,F(l)}finally{o=r,i=u}(!t.updatedAt||t.updatedAt<=n)&&(t.updatedAt!=null&&"observers"in t?I(t,s):t.value=s,t.updatedAt=n)}function A(t,e,n,s=p,u){const r={fn:t,state:s,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:e,owner:i,context:i?i.context:null,pure:n};return i===null||i!==k&&(i.owned?i.owned.push(r):i.owned=[r]),r}function S(t){if(t.state===0)return;if(t.state===v)return m(t);if(t.suspense&&P(t.suspense.inFallback))return t.suspense.effects.push(t);const e=[t];for(;(t=t.owner)&&(!t.updatedAt||t.updatedAt<O);)t.state&&e.push(t);for(let n=e.length-1;n>=0;n--)if(t=e[n],t.state===p)w(t);else if(t.state===v){const s=c;c=null,g(()=>m(t,e[0]),!1),c=s}}function g(t,e){if(c)return t();let n=!1;e||(c=[]),h?n=!0:h=[],O++;try{const s=t();return H(n),s}catch(s){n||(h=null),c=null,F(s)}}function H(t){if(c&&(R(c),c=null),t)return;const e=h;h=null,e.length&&g(()=>U(e),!1)}function R(t){for(let e=0;e<t.length;e++)S(t[e])}function M(t){let e,n=0;for(e=0;e<t.length;e++){const s=t[e];s.user?t[n++]=s:S(s)}if(f.context){if(f.count){f.effects||(f.effects=[]),f.effects.push(...t.slice(0,n));return}$()}for(f.effects&&!f.count&&(t=[...f.effects,...t],n+=f.effects.length,delete f.effects),e=0;e<n;e++)S(t[e])}function m(t,e){t.state=0;for(let n=0;n<t.sources.length;n+=1){const s=t.sources[n];if(s.sources){const u=s.state;u===p?s!==e&&(!s.updatedAt||s.updatedAt<O)&&S(s):u===v&&m(s,e)}}}function T(t){for(let e=0;e<t.observers.length;e+=1){const n=t.observers[e];n.state||(n.state=v,n.pure?c.push(n):h.push(n),n.observers&&T(n))}}function b(t){let e;if(t.sources)for(;t.sources.length;){const n=t.sources.pop(),s=t.sourceSlots.pop(),u=n.observers;if(u&&u.length){const r=u.pop(),l=n.observerSlots.pop();s<u.length&&(r.sourceSlots[l]=s,u[s]=r,n.observerSlots[s]=l)}}if(t.tOwned){for(e=t.tOwned.length-1;e>=0;e--)b(t.tOwned[e]);delete t.tOwned}if(t.owned){for(e=t.owned.length-1;e>=0;e--)b(t.owned[e]);t.owned=null}if(t.cleanups){for(e=t.cleanups.length-1;e>=0;e--)t.cleanups[e]();t.cleanups=null}t.state=0}function Q(t){return t instanceof Error?t:new Error(typeof t=="string"?t:"Unknown error",{cause:t})}function F(t,e=i){throw Q(t)}function et(t,e){return P(()=>t(e||{}))}function d(){return!0}const N={get(t,e,n){return e===E?n:t.get(e)},has(t,e){return e===E?!0:t.has(e)},set:d,deleteProperty:d,getOwnPropertyDescriptor(t,e){return{configurable:!0,enumerable:!0,get(){return t.get(e)},set:d,deleteProperty:d}},ownKeys(t){return t.keys()}};function nt(t,...e){if(X&&E in t){const u=new Set(e.length>1?e.flat():e[0]),r=e.map(l=>new Proxy({get(a){return l.includes(a)?t[a]:void 0},has(a){return l.includes(a)&&a in t},keys(){return l.filter(a=>a in t)}},N));return r.push(new Proxy({get(l){return u.has(l)?void 0:t[l]},has(l){return u.has(l)?!1:l in t},keys(){return Object.keys(t).filter(l=>!u.has(l))}},N)),r}const n={},s=e.map(()=>({}));for(const u of Object.getOwnPropertyNames(t)){const r=Object.getOwnPropertyDescriptor(t,u),l=!r.get&&!r.set&&r.enumerable&&r.writable&&r.configurable;let a=!1,y=0;for(const L of e)L.includes(u)&&(a=!0,l?s[y][u]=r.value:Object.defineProperty(s[y],u,r)),++y;a||(l?n[u]=r.value:Object.defineProperty(n,u,r))}return[...s,n]}let V=0;function st(){return f.context?f.getNextContextId():`cl-${V++}`}export{E as $,B as a,W as b,_ as c,q as d,z as e,et as f,tt as g,nt as h,Z as i,J as j,st as k,f as s,P as u};
