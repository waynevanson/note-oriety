const L=(e,t)=>e===t,P=Symbol("solid-proxy"),$=typeof Proxy=="function",M=Symbol("solid-track"),v={equals:L};let C=R;const h=1,S=2,U={owned:null,cleanups:null,context:null,owner:null};var c=null;let E=null,I=null,o=null,i=null,f=null,y=0;function Q(e,t){const s=o,r=c,u=e.length===0,n=t===void 0?r:t,l=u?U:{owned:null,cleanups:null,context:n?n.context:null,owner:n},a=u?e:()=>e(()=>x(()=>b(l)));c=l,o=null;try{return p(a,!0)}finally{o=s,c=r}}function V(e,t){t=t?Object.assign({},v,t):v;const s={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},r=u=>(typeof u=="function"&&(u=u(s.value)),N(s,u));return[D.bind(s),r]}function W(e,t,s){const r=A(e,t,!1,h);g(r)}function _(e,t,s){C=Y;const r=A(e,t,!1,h);r.user=!0,f?f.push(r):g(r)}function q(e,t,s){s=s?Object.assign({},v,s):v;const r=A(e,t,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=s.equals||void 0,g(r),D.bind(r)}function z(e){return p(e,!1)}function x(e){if(o===null)return e();const t=o;o=null;try{return e()}finally{o=t}}function B(){return o}function D(){if(this.sources&&this.state)if(this.state===h)g(this);else{const e=i;i=null,p(()=>O(this),!1),i=e}if(o){const e=this.observers?this.observers.length:0;o.sources?(o.sources.push(this),o.sourceSlots.push(e)):(o.sources=[this],o.sourceSlots=[e]),this.observers?(this.observers.push(o),this.observerSlots.push(o.sources.length-1)):(this.observers=[o],this.observerSlots=[o.sources.length-1])}return this.value}function N(e,t,s){let r=e.value;return(!e.comparator||!e.comparator(r,t))&&(e.value=t,e.observers&&e.observers.length&&p(()=>{for(let u=0;u<e.observers.length;u+=1){const n=e.observers[u],l=E&&E.running;l&&E.disposed.has(n),(l?!n.tState:!n.state)&&(n.pure?i.push(n):f.push(n),n.observers&&T(n)),l||(n.state=h)}if(i.length>1e6)throw i=[],new Error},!1)),t}function g(e){if(!e.fn)return;b(e);const t=y;K(e,e.value,t)}function K(e,t,s){let r;const u=c,n=o;o=c=e;try{r=e.fn(t)}catch(l){return e.pure&&(e.state=h,e.owned&&e.owned.forEach(b),e.owned=null),e.updatedAt=s+1,k(l)}finally{o=n,c=u}(!e.updatedAt||e.updatedAt<=s)&&(e.updatedAt!=null&&"observers"in e?N(e,r):e.value=r,e.updatedAt=s)}function A(e,t,s,r=h,u){const n={fn:e,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:c,context:c?c.context:null,pure:s};return c===null||c!==U&&(c.owned?c.owned.push(n):c.owned=[n]),n}function m(e){if(e.state===0)return;if(e.state===S)return O(e);if(e.suspense&&x(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<y);)e.state&&t.push(e);for(let s=t.length-1;s>=0;s--)if(e=t[s],e.state===h)g(e);else if(e.state===S){const r=i;i=null,p(()=>O(e,t[0]),!1),i=r}}function p(e,t){if(i)return e();let s=!1;t||(i=[]),f?s=!0:f=[],y++;try{const r=e();return X(s),r}catch(r){s||(f=null),i=null,k(r)}}function X(e){if(i&&(R(i),i=null),e)return;const t=f;f=null,t.length&&p(()=>C(t),!1)}function R(e){for(let t=0;t<e.length;t++)m(e[t])}function Y(e){let t,s=0;for(t=0;t<e.length;t++){const r=e[t];r.user?e[s++]=r:m(r)}for(t=0;t<s;t++)m(e[t])}function O(e,t){e.state=0;for(let s=0;s<e.sources.length;s+=1){const r=e.sources[s];if(r.sources){const u=r.state;u===h?r!==t&&(!r.updatedAt||r.updatedAt<y)&&m(r):u===S&&O(r,t)}}}function T(e){for(let t=0;t<e.observers.length;t+=1){const s=e.observers[t];s.state||(s.state=S,s.pure?i.push(s):f.push(s),s.observers&&T(s))}}function b(e){let t;if(e.sources)for(;e.sources.length;){const s=e.sources.pop(),r=e.sourceSlots.pop(),u=s.observers;if(u&&u.length){const n=u.pop(),l=s.observerSlots.pop();r<u.length&&(n.sourceSlots[l]=r,u[r]=n,s.observerSlots[r]=l)}}if(e.tOwned){for(t=e.tOwned.length-1;t>=0;t--)b(e.tOwned[t]);delete e.tOwned}if(e.owned){for(t=e.owned.length-1;t>=0;t--)b(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function G(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function k(e,t=c){throw G(e)}function H(e,t){return x(()=>e(t||{}))}function w(){return!0}const j={get(e,t,s){return t===P?s:e.get(t)},has(e,t){return t===P?!0:e.has(t)},set:w,deleteProperty:w,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:w,deleteProperty:w}},ownKeys(e){return e.keys()}};function J(e,...t){if($&&P in e){const u=new Set(t.length>1?t.flat():t[0]),n=t.map(l=>new Proxy({get(a){return l.includes(a)?e[a]:void 0},has(a){return l.includes(a)&&a in e},keys(){return l.filter(a=>a in e)}},j));return n.push(new Proxy({get(l){return u.has(l)?void 0:e[l]},has(l){return u.has(l)?!1:l in e},keys(){return Object.keys(e).filter(l=>!u.has(l))}},j)),n}const s={},r=t.map(()=>({}));for(const u of Object.getOwnPropertyNames(e)){const n=Object.getOwnPropertyDescriptor(e,u),l=!n.get&&!n.set&&n.enumerable&&n.writable&&n.configurable;let a=!1,d=0;for(const F of t)F.includes(u)&&(a=!0,l?r[d][u]=n.value:Object.defineProperty(r[d],u,n)),++d;a||(l?s[u]=n.value:Object.defineProperty(s,u,n))}return[...r,s]}export{P as $,W as a,M as b,Q as c,z as d,V as e,H as f,B as g,q as h,_ as i,J as s,x as u};
