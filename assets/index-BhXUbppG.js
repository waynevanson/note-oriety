import{c as ie,a as m,u as oe,b as F,d as le,$ as b,e as V,g as K,f as se,h as ce,i as G}from"./solid-js-DsYHm_RB.js";import{F as re,R as fe}from"./vexflow-DwtmvLuk.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))l(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&l(c)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function l(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function ae(e,n,t){let l=t.length,i=n.length,s=l,c=0,o=0,r=n[i-1].nextSibling,f=null;for(;c<i||o<s;){if(n[c]===t[o]){c++,o++;continue}for(;n[i-1]===t[s-1];)i--,s--;if(i===c){const a=s<l?o?t[o-1].nextSibling:t[s-o]:r;for(;o<s;)e.insertBefore(t[o++],a)}else if(s===o)for(;c<i;)(!f||!f.has(n[c]))&&n[c].remove(),c++;else if(n[c]===t[s-1]&&t[o]===n[i-1]){const a=n[--i].nextSibling;e.insertBefore(t[o++],n[c++].nextSibling),e.insertBefore(t[--s],a),n[i]=t[s]}else{if(!f){f=new Map;let d=o;for(;d<s;)f.set(t[d],d++)}const a=f.get(n[c]);if(a!=null)if(o<a&&a<s){let d=c,y=1,A;for(;++d<i&&d<s&&!((A=f.get(n[d]))==null||A!==a+y);)y++;if(y>a-o){const x=n[c];for(;o<a;)e.insertBefore(t[o++],x)}else e.replaceChild(t[o++],n[c++])}else c++;else n[c++].remove()}}}const Y="_$DX_DELEGATE";function ue(e,n,t,l={}){let i;return ie(s=>{i=s,n===document?e():h(n,e(),n.firstChild?null:void 0,t)},l.owner),()=>{i(),n.textContent=""}}function S(e,n,t){let l;const i=()=>{const c=document.createElement("template");return c.innerHTML=e,c.content.firstChild},s=()=>(l||(l=i())).cloneNode(!0);return s.cloneNode=s,s}function de(e,n=window.document){const t=n[Y]||(n[Y]=new Set);for(let l=0,i=e.length;l<i;l++){const s=e[l];t.has(s)||(t.add(s),n.addEventListener(s,ge))}}function J(e,n){n==null?e.removeAttribute("class"):e.className=n}function he(e,n,t){return oe(()=>e(n,t))}function h(e,n,t,l){if(t!==void 0&&!l&&(l=[]),typeof n!="function")return B(e,n,l,t);m(i=>B(e,n(),i,t),l)}function ge(e){let n=e.target;const t=`$$${e.type}`,l=e.target,i=e.currentTarget,s=r=>Object.defineProperty(e,"target",{configurable:!0,value:r}),c=()=>{const r=n[t];if(r&&!n.disabled){const f=n[`${t}Data`];if(f!==void 0?r.call(n,f,e):r.call(n,e),e.cancelBubble)return}return n.host&&typeof n.host!="string"&&!n.host._$host&&n.contains(e.target)&&s(n.host),!0},o=()=>{for(;c()&&(n=n._$host||n.parentNode||n.host););};if(Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return n||document}}),e.composedPath){const r=e.composedPath();s(r[0]);for(let f=0;f<r.length-2&&(n=r[f],!!c());f++){if(n._$host){n=n._$host,o();break}if(n.parentNode===i)break}}else o();s(l)}function B(e,n,t,l,i){for(;typeof t=="function";)t=t();if(n===t)return t;const s=typeof n,c=l!==void 0;if(e=c&&t[0]&&t[0].parentNode||e,s==="string"||s==="number"){if(s==="number"&&(n=n.toString(),n===t))return t;if(c){let o=t[0];o&&o.nodeType===3?o.data!==n&&(o.data=n):o=document.createTextNode(n),t=_(e,t,l,o)}else t!==""&&typeof t=="string"?t=e.firstChild.data=n:t=e.textContent=n}else if(n==null||s==="boolean")t=_(e,t,l);else{if(s==="function")return m(()=>{let o=n();for(;typeof o=="function";)o=o();t=B(e,o,t,l)}),()=>t;if(Array.isArray(n)){const o=[],r=t&&Array.isArray(t);if(L(o,n,t,i))return m(()=>t=B(e,o,t,l,!0)),()=>t;if(o.length===0){if(t=_(e,t,l),c)return t}else r?t.length===0?q(e,o,l):ae(e,t,o):(t&&_(e),q(e,o));t=o}else if(n.nodeType){if(Array.isArray(t)){if(c)return t=_(e,t,l,n);_(e,t,null,n)}else t==null||t===""||!e.firstChild?e.appendChild(n):e.replaceChild(n,e.firstChild);t=n}}return t}function L(e,n,t,l){let i=!1;for(let s=0,c=n.length;s<c;s++){let o=n[s],r=t&&t[e.length],f;if(!(o==null||o===!0||o===!1))if((f=typeof o)=="object"&&o.nodeType)e.push(o);else if(Array.isArray(o))i=L(e,o,r)||i;else if(f==="function")if(l){for(;typeof o=="function";)o=o();i=L(e,Array.isArray(o)?o:[o],Array.isArray(r)?r:[r])||i}else e.push(o),i=!0;else{const a=String(o);r&&r.nodeType===3&&r.data===a?e.push(r):e.push(document.createTextNode(a))}}return i}function q(e,n,t=null){for(let l=0,i=n.length;l<i;l++)e.insertBefore(n[l],t)}function _(e,n,t,l){if(t===void 0)return e.textContent="";const i=l||document.createTextNode("");if(n.length){let s=!1;for(let c=n.length-1;c>=0;c--){const o=n[c];if(i!==o){const r=o.parentNode===e;!s&&!c?r?e.replaceChild(i,o):e.insertBefore(i,t):r&&o.remove()}else s=!0}}else e.insertBefore(i,t);return[i]}const Ce="_main_r8eiw_1",be={main:Ce},ye="_note_1hw5a_1",Ae="_svg_1hw5a_5",_e="_ref_1hw5a_8",U={note:ye,svg:Ae,ref:_e},N={C:["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],G:["C","C#","D","D#","E","Fn","F","G","G#","A","A#","B"],D:["Cn","C","D","D#","E","Fn","F","G","G#","A","A#","B"],A:["Cn","C","D","D#","E","Fn","F","Gn","G","A","A#","B"],E:["Cn","C","Dn","D","E","Fn","F","Gn","G","A","A#","B"],B:["Cn","C","Dn","D","E","Fn","F","Gn","G","An","A","B"],"F#":["Cn","C","Dn","D","En","E","F","Gn","G","An","A","B"],"C#":["Cn","C","Dn","D","En","E","F","Gn","G","An","A","Bn"],F:["C","Db","D","Eb","E","F","Gb","G","Ab","A","B","Bn"],Bb:["C","Db","D","E","En","F","Gb","G","Ab","A","B","Bn"],Eb:["C","Db","D","E","En","F","Gb","G","A","An","B","Bn"],Ab:["C","D","Dn","E","En","F","Gb","G","A","An","B","Bn"],Db:["C","D","Dn","E","En","F","G","Gn","A","An","B","Bn"],Gb:["Cn","D","Dn","E","En","F","G","Gn","A","An","B","C"],Cb:["Cn","D","Dn","E","F","Fn","G","Gn","A","An","B","C"]};function $e(e){const n=["b","#","n","x"];return e.filter(t=>n.some(l=>t.includes(l))).length}const me={C:[0,2,4,5,7,9,11],G:[7,9,11,0,2,4,6],D:[2,4,6,7,9,11,1],A:[9,11,1,2,4,6,8],E:[4,6,8,9,11,1,3],B:[11,1,3,4,6,8,10],"F#":[6,7,9,10,0,2,4],"C#":[1,3,5,6,8,10,0],F:[5,7,9,10,0,2,4],Bb:[10,0,2,3,5,7,9],Eb:[3,5,7,8,10,0,2],Ab:[8,10,0,1,3,5,7],Db:[1,3,5,6,8,10,0],Gb:[6,8,10,11,1,3,5],Cb:[11,1,3,4,6,8,10]},Se=Array.from({length:12},(e,n)=>n);function j(e){const n=we({min:0,max:e.length-1});return e[n]}function we(e){const n=Math.random(),t=Oe(n,{min:0,max:1},e);return Math.round(t)}function W(){return j(Se)}function Ee(e){const n=me[e];return j(n)}function De(){return j([3,4])}function Oe(e,n,t){return(e-n.min)/(n.max-n.min)*(t.max-t.min)+t.min}var Ge=S("<div id=note-oriety-vex-flow>");const Fe="note-oriety-vex-flow";function Be(e){let n;const t=F(()=>N[e.signature()][e.pitchClassKind()]);return le(l=>{if(!n)return!1;l&&(n.innerHTML="");const s=100+$e(N[e.signature()])*10,c=140,o=new re({renderer:{elementId:Fe,width:s,height:c,backend:fe.SVG}}),r=o.EasyScore(),f=r.notes(`${t()}${e.octave()}/w`,{clef:e.clef});o.System().addStave({voices:[r.voice(f)]}).addClef(e.clef).addKeySignature(e.signature()),o.draw();const a=n.firstChild;return a.removeAttribute("width"),a.removeAttribute("height"),a.classList.add(U.svg),n.classList.add(U.ref),!0},!1),(()=>{var l=Ge(),i=n;return typeof i=="function"?he(i,l):n=l,l})()}const v=Symbol("store-raw"),$=Symbol("store-node"),C=Symbol("store-has"),Q=Symbol("store-self");function Z(e){let n=e[b];if(!n&&(Object.defineProperty(e,b,{value:n=new Proxy(e,Pe)}),!Array.isArray(e))){const t=Object.keys(e),l=Object.getOwnPropertyDescriptors(e);for(let i=0,s=t.length;i<s;i++){const c=t[i];l[c].get&&Object.defineProperty(e,c,{enumerable:l[c].enumerable,get:l[c].get.bind(n)})}}return n}function k(e){let n;return e!=null&&typeof e=="object"&&(e[b]||!(n=Object.getPrototypeOf(e))||n===Object.prototype||Array.isArray(e))}function E(e,n=new Set){let t,l,i,s;if(t=e!=null&&e[v])return t;if(!k(e)||n.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):n.add(e);for(let c=0,o=e.length;c<o;c++)i=e[c],(l=E(i,n))!==i&&(e[c]=l)}else{Object.isFrozen(e)?e=Object.assign({},e):n.add(e);const c=Object.keys(e),o=Object.getOwnPropertyDescriptors(e);for(let r=0,f=c.length;r<f;r++)s=c[r],!o[s].get&&(i=e[s],(l=E(i,n))!==i&&(e[s]=l))}return e}function T(e,n){let t=e[n];return t||Object.defineProperty(e,n,{value:t=Object.create(null)}),t}function D(e,n,t){if(e[n])return e[n];const[l,i]=ce(t,{equals:!1,internal:!0});return l.$=i,e[n]=l}function ke(e,n){const t=Reflect.getOwnPropertyDescriptor(e,n);return!t||t.get||!t.configurable||n===b||n===$||(delete t.value,delete t.writable,t.get=()=>e[b][n]),t}function z(e){K()&&D(T(e,$),Q)()}function Te(e){return z(e),Reflect.ownKeys(e)}const Pe={get(e,n,t){if(n===v)return e;if(n===b)return t;if(n===V)return z(e),t;const l=T(e,$),i=l[n];let s=i?i():e[n];if(n===$||n===C||n==="__proto__")return s;if(!i){const c=Object.getOwnPropertyDescriptor(e,n);K()&&(typeof s!="function"||e.hasOwnProperty(n))&&!(c&&c.get)&&(s=D(l,n,s)())}return k(s)?Z(s):s},has(e,n){return n===v||n===b||n===V||n===$||n===C||n==="__proto__"?!0:(K()&&D(T(e,C),n)(),n in e)},set(){return!0},deleteProperty(){return!0},ownKeys:Te,getOwnPropertyDescriptor:ke};function P(e,n,t,l=!1){if(!l&&e[n]===t)return;const i=e[n],s=e.length;t===void 0?(delete e[n],e[C]&&e[C][n]&&i!==void 0&&e[C][n].$()):(e[n]=t,e[C]&&e[C][n]&&i===void 0&&e[C][n].$());let c=T(e,$),o;if((o=D(c,n,i))&&o.$(()=>t),Array.isArray(e)&&e.length!==s){for(let r=e.length;r<s;r++)(o=c[r])&&o.$();(o=D(c,"length",s))&&o.$(e.length)}(o=c[Q])&&o.$()}function p(e,n){const t=Object.keys(n);for(let l=0;l<t.length;l+=1){const i=t[l];P(e,i,n[i])}}function xe(e,n){if(typeof n=="function"&&(n=n(e)),n=E(n),Array.isArray(n)){if(e===n)return;let t=0,l=n.length;for(;t<l;t++){const i=n[t];e[t]!==i&&P(e,t,i)}P(e,"length",l)}else p(e,n)}function w(e,n,t=[]){let l,i=e;if(n.length>1){l=n.shift();const c=typeof l,o=Array.isArray(e);if(Array.isArray(l)){for(let r=0;r<l.length;r++)w(e,[l[r]].concat(n),t);return}else if(o&&c==="function"){for(let r=0;r<e.length;r++)l(e[r],r)&&w(e,[r].concat(n),t);return}else if(o&&c==="object"){const{from:r=0,to:f=e.length-1,by:a=1}=l;for(let d=r;d<=f;d+=a)w(e,[d].concat(n),t);return}else if(n.length>1){w(e[l],n,[l].concat(t));return}i=e[l],t=[l].concat(t)}let s=n[0];typeof s=="function"&&(s=s(i,t),s===i)||l===void 0&&s==null||(s=E(s),l===void 0||k(i)&&k(s)&&!Array.isArray(s)?p(i,s):P(e,l,s))}function Ke(...[e,n]){const t=E(e||{}),l=Array.isArray(t),i=Z(t);function s(...c){se(()=>{l&&c.length===1?xe(t,c[0]):w(t,c)})}return[i,s]}var Le=S("<div><label for=input.key><span>Key Signature </span><select name=input.key id=input.key></select></label><label for=input.clef><span> Clef </span><select></select></label><label for=input.chromatics><span> Chromatics: </span><input type=checkbox></label><span> Streak: <!> </span><span>Accuracy: <!>% (<!> of <!>)"),X=S("<option>");function Ne(e){const n=F(()=>e.outcome.correct+e.outcome.incorrect),t=F(()=>n()<=0?0:Math.trunc(100*(e.outcome.correct/n())));return(()=>{var l=Le(),i=l.firstChild,s=i.firstChild,c=s.nextSibling,o=i.nextSibling,r=o.firstChild,f=r.nextSibling,a=o.nextSibling,d=a.firstChild,y=d.nextSibling,A=a.nextSibling,x=A.firstChild,I=x.nextSibling;I.nextSibling;var O=A.nextSibling,ee=O.firstChild,R=ee.nextSibling,ne=R.nextSibling,M=ne.nextSibling,te=M.nextSibling,H=te.nextSibling;return H.nextSibling,c.addEventListener("change",g=>{var u;(u=e==null?void 0:e.onChangeKeySignature)==null||u.call(e,g.target.value)}),h(c,()=>Object.keys(N).map(g=>(()=>{var u=X();return u.value=g,h(u,g),m(()=>u.selected=e.keySignature==g),u})())),f.addEventListener("change",g=>{var u;return(u=e==null?void 0:e.onChangeClef)==null?void 0:u.call(e,g.target.value)}),h(f,()=>["treble","alto","bass"].map(g=>(()=>{var u=X();return u.value=g,h(u,g),u})())),y.addEventListener("change",g=>{var u;return(u=e.onChangeChromatics)==null?void 0:u.call(e,g.currentTarget.checked)}),h(A,()=>e.streak,I),h(O,t,R),h(O,()=>e.outcome.correct,M),h(O,n,H),m(()=>y.checked=e.chromatics),l})()}var ve=S("<ul class=piano>"),je=S("<li>");function Ie(e){return(()=>{var n=ve();return h(n,()=>["white c","black cs","white d","black ds","white e","white f","black fs","white g","black gs","white a","black as","white b"].map((t,l)=>(()=>{var i=je();return i.$$click=()=>{var s;return(s=e.onClick)==null?void 0:s.call(e,l)},J(i,`key ${t}`),i})())),n})()}de(["click"]);var Re=S("<main>");const Me={treble:1,alto:0,bass:-1};function He(){const[e,n]=Ke({pitchClassKind:W(),signature:"C",altoOctave:4,outcome:{correct:0,incorrect:0},showChromatics:!0,streak:0,clef:"treble"}),t=F(()=>e.altoOctave+Me[e.clef]);function l(){let o;for(;;)if(o=e.showChromatics?W():Ee(e.signature),o!==e.pitchClassKind){n("pitchClassKind",o);break}n("altoOctave",De())}function i(o){n("showChromatics",o),l()}function s(o){if(o!==e.pitchClassKind){n("streak",0),n("outcome","incorrect",r=>r+1);return}n("streak",r=>r+1),n("outcome","correct",r=>r+1),l()}function c(o){n("clef",o)}return(()=>{var o=Re();return h(o,G(Be,{pitchClassKind:()=>e.pitchClassKind,signature:()=>e.signature,octave:t,get clef(){return e.clef}}),null),h(o,G(Ne,{get chromatics(){return e.showChromatics},get keySignature(){return e.signature},get outcome(){return e.outcome},get streak(){return e.streak},onChangeChromatics:i,onChangeKeySignature:r=>n("signature",r),onChangeClef:c,get clef(){return e.clef}}),null),h(o,G(Ie,{onClick:r=>s(r)}),null),m(()=>J(o,be.main)),o})()}ue(()=>G(He,{}),document.body);
